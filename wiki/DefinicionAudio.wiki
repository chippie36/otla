#summary Definición de la señal de audio para carga a alta velocidad

=Señal de audio =

La señales de audio que maneja la rutina de carga del ProyectoOtla son señales mono con frecuencias de muestreo de 44100 Hz o 48000 Hz.

Se pueden emplear difentes formas de onda, WavForms. Elegir la forma de onda adecuada cuando se quieren experimentar las velocidad de carga más altas puede ser determinante.

Y tiene la siguiente estructura:

[http://personal.auna.com/casariche/otla/signal.png]

*Tono guia*
 Al menos 12 ciclos de 18 muestras (es decir, un tono de 2450 Hz cuando la frecuencia de muestreo es de 44100 HK o 2666 Hz para una frecuencia de muestreo de 48000)
 
*sync1  Pulso de sincronismo*

 Formado por un ciclo de 8 muestras. Sirve para detectar la polaridad de la onda

*sync2 Ciclo postsincromismo*

 Un ciclo de 6 muestras

*Checksum + N bytes de datos*

 4(1+n) ciclos. Cada ciclo codifica una pareja de bits (símbolo) según esta tabla

  '00' ciclo de x  muestras
 
  '01' ciclo de x+d muestras

  '10' ciclo de x+2d muestras

  '11' ciclo de x+3d muestras

 Donde x puede ser 2 muestras o más y d puede ser una diferencia entre simbolos de 1 ó 2. x y d conjuntamente con la frecuencia de muestreo del wav determinan la velocidad (bps). f / ((2x+3d)/4) =  velocidad  (bps) 

|| f || x || d || bps ||
|| 44100 || 5 || 2 || 11025 ||
|| 48000 || 5 || 2 || 12000 ||
|| 44100 || 4 || 2 || 12600 ||
|| 48000 || 4 || 2 || 13714 ||
|| 44100 || 3 || 2 || 14700 ||
|| 48000 || 3 || 2 || 16000 ||
|| 44100 || 4 || 1 || 16036 ||
|| 48000 || 4 || 1 || 17455 ||
|| 44100 || 2 || 2 || 17640 ||
|| 48000 || 2 || 2 || 19200 ||
|| 44100 || 3 || 1 || 19600 ||
|| 48000 || 3 || 1 || 21333 ||
|| 44100 || 2 || 1 || 25200 ||
|| 48000 || 2 || 1 || 27428 ||


 Cuatro símbolos codifican un byte siendo el símbolo que se trasmite en primer lugar el de mayor peso.
 El primer byte que se trasmite es un checksum  ( XOR de los N bytes de datos ) y luego N bytes de datos


*Ciclos de fin de trasmision*

 Cuatro ciclos con las siguientes duraciones

  un  ciclo de  x+3d+2  muestras

  un  ciclo de x+3d+4  muestras

  un  ciclo de x+3d+5  muestras

  un  ciclo de x+3d+6  muestras

*Siguiente bloque de datos*

 En caso de transmitir más de un bloque de datos se sique sin pausa el tono guia del siguente bloque

*Tono final*

 Si no se trasmiten más bloques se acaba con un tono de amplitud decreciante hasta cero de 1000 ciclos de 24 muestras .(aprox. 1838 Hz durante 0,5 segundos). 